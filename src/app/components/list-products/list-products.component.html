<div class="container mt-4">
  <div class="title">
    <h4>Listado de productos</h4>
    <button type="button" class="btn btn-success" routerLink="/addProducto">
      ➕ Agregar productos
    </button>
  </div>

  <div class="table-responsive">
    <table class="table table-dark table-bordered shadow-sm">
      <thead>
        <tr>
          <th scope="col">Imagen</th>
          <th scope="col">Nombre</th>
          <th scope="col">Descripción</th>
          <th scope="col">Categoría</th>
          <th scope="col">Proveedor</th>
          <th scope="col">Precio compra</th>
          <th scope="col">Precio venta</th>
          <th scope="col">Stock</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of productos; trackBy: trackById" class="table-light">
          <td>
            <img
              *ngIf="producto.urlImagen"
              [src]="producto.urlImagen"
              alt="Imagen del producto"
              class="img-fluid rounded border"
              style="max-width: 60px; max-height: 60px;"
            />
            <span *ngIf="!producto.urlImagen">Sin imagen</span>
          </td>
          <td>{{ producto.nombre }}</td>
          <td>{{ producto.descripcion }}</td>
          <td>{{ producto.categoria.nombre }}</td>
          <td>{{ producto.proveedor.nombre }}</td>
          <td>{{ producto.precioCompra }}</td>
          <td>{{ producto.precioVenta }}</td>
          <td>{{ producto.stock }}</td>
          <td>
            <div class="d-flex flex-column flex-md-row justify-content-center gap-1">
              <button class="btn btn-primary btn-sm" routerLink="/editProducto/{{ producto.idProducto }}">Editar</button>
              <button class="btn btn-danger btn-sm" (click)="deleteProduct(producto.idProducto!)">Eliminar</button>
              <button class="btn btn-dark btn-sm" routerLink="/venderD/{{ producto.idProducto }}">Vender/Devolución</button>
              <button class="btn btn-success btn-sm" routerLink="/comprar/{{ producto.idProducto }}">Comprar</button>
            </div>
          </td>
        </tr>
        <tr *ngIf="productos.length === 0">
          <td colspan="9" class="text-center">No hay productos disponibles</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
